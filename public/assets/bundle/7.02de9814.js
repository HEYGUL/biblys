(window.webpackJsonp=window.webpackJsonp||[]).push([[7,13,19],{"1V/t":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return s}));var i=n("9xd5"),a=n("gZEe");function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.articles=[],this.articlesTable=e,this.progressBar=document.querySelector("#progress-bar"),this.articleCount=document.querySelector("#article-count"),this.articleCountTotal=+this.articleCount.textContent,this.articleCountRemaining=this.articleCountTotal,this.articleProcessed=0,this.progressBar.value=0,this.progressBar.max=this.articleCountTotal,this.loadArticles((function(){return n.updateNextArticle()}))}var e,n,s;return e=t,(n=[{key:"loadArticles",value:function(t){var e=this;fetch("/admin/articles/search-terms/",{credentials:"same-origin",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then((function(t){return t.json()})).then((function(n){if(n.error)throw n.error;e.articleCountRemaining=n.count,n.articles.forEach((function(t){e.articles.push(new a.default(t,e.articlesTable))})),t()})).catch((function(t){new i.default(t,{type:"warning",sticky:!0})}))}},{key:"updateNextArticle",value:function(){var t=this,e=this.articles.shift();void 0!==e?e.update(function(){this.updateProgress(),this.updateNextArticle()}.bind(this)):this.articleCountRemaining>0&&this.loadArticles((function(){return t.updateNextArticle()}))}},{key:"updateProgress",value:function(){this.progressBar.value+=1,this.articleCountRemaining-=1,this.articleCount.textContent=this.articleCountRemaining}}])&&r(e.prototype,n),s&&r(e,s),t}()},"9xd5":function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n.r(e),n.d(e,"default",(function(){return a}));var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,n=n||{},this.params={type:n.type||"info",timeout:n.timeout||2500,sticky:n.sticky||!1,closeButton:n.closeButton||!1,loader:n.loader||!1,sound:n.sound||!1},this.init()}var e,n,a;return e=t,(n=[{key:"init",value:function(){var t=this.getNotificationsContainer(),e=this.renderNotification();t.appendChild(e),this.params.closeButton&&this.addCloseButton(),this.params.loader&&this.addLoader(),this.params.sound&&this.playSound(),this.params.sticky||window.setTimeout(function(){this.remove()}.bind(this),this.params.timeout)}},{key:"getNotificationsContainer",value:function(){var t=document.querySelector(".notifications");return t||(t=this.createNotificationsContainer()),t}},{key:"createNotificationsContainer",value:function(){var t=document.createElement("div");return t.classList.add("notifications"),document.body.appendChild(t),t}},{key:"renderNotification",value:function(){return this.element=document.createElement("div"),this.element.classList.add("notification"),this.element.classList.add("alert"),this.element.classList.add("alert-"+this.params.type),this.element.innerHTML=this.text,this.element}},{key:"addCloseButton",value:function(){var t=document.createElement("span");t.classList.add("fa"),t.classList.add("fa-close"),this.element.insertAdjacentElement("afterbegin",t),t.addEventListener("click",function(){this.remove()}.bind(this))}},{key:"addLoader",value:function(){var t=document.createElement("span");t.classList.add("fa"),t.classList.add("fa-spinner"),t.classList.add("fa-spin"),this.element.insertAdjacentElement("afterbegin",t)}},{key:"playSound",value:function(){var t=document.createElement("audio");t.style.display="none",t.autoplay=!0,t.innerHTML='<source src="/assets/sounds/'+this.params.sound+'.mp3" type="audio/mp3">',this.element.appendChild(t)}},{key:"remove",value:function(){this.element.style.opacity=0,window.setTimeout(function(){this.element.parentNode.removeChild(this.element)}.bind(this),400)}}])&&i(e.prototype,n),a&&i(e,a),t}()},gZEe:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var i=n("9xd5");function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.title=e.title,this.url=e.url,this.table=n}var e,n,r;return e=t,(n=[{key:"update",value:function(t){this.tr=document.createElement("tr"),this.tr.innerHTML='\n      <td>\n        <a href="'.concat(this.url,'">').concat(this.title,'</a>\n      </td>\n      <td class="search-terms"><span class="fa fa-spinner fa-pulse fa-fw"></span></td>\n    '),this.table.insertAdjacentElement("afterBegin",this.tr),fetch("/admin/articles/"+this.id+"/refresh-search-terms",{method:"POST",credentials:"same-origin",headers:{Accept:"application/json"}}).then((function(t){return t.json()})).then(function(e){if(e.error)throw e.error;this.displayTerms(e.terms),t()}.bind(this)).catch((function(t){new i.default(t,{type:"warning",sticky:!0})}))}},{key:"displayTerms",value:function(t){this.tr.querySelector(".search-terms").textContent=t}}])&&a(e.prototype,n),r&&a(e,r),t}()}}]);