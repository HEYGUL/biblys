{% extends "layout:base.html.twig" %}

{% block title %}
  Catalogue
{% endblock %}

{% block main %}
  <h1>
    <span class="fa fa-list-alt"></span>
    Catalogue
  </h1>

  <a class="btn btn-primary" href="{{ path("api_articles_export") }}">
    <span class="fa fa-cloud-download"></span>
    Télécharger le catalogue (CSV)
  </a>

  <h2>{{ count }} articles</h2>

  <table id="catalog" class="table">
    <thead>
    <tr>
      <th>EAN</th>
      <th>Titre<br/>
        <small>Auteur·trice·s</small>
      </th>
      <th>Collection<br/>
        <small>Éditeur</small>
      </th>
      <th>Prix</th>
      <th>Stock</th>
    </tr>
    </thead>
    <tbody>
    {% for article in articles %}
      <tr>
        <td>
          {{ article.ean }}
        </td>
        <td>
          <a href="/a/{{ article.url }}">
            {{ article.title }}
          </a><br/>
          <small>{{ article.authors|authors }}</small>
        </td>
        <td>
          {{ article.collectionName }}<br>
          <small>{{ article.publisherName }}</small>
        </td>
        {% if article.price %}
          <td>{{ article.price|currency(true)|raw }}</td>
        {% endif %}
        <td class="text-right">
          {{ article.countAvailableStockItemsForSite(site) }}
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  {% include 'AppBundle:Article:_list_pagination.html.twig' %}
{% endblock %}
